{"sections":{"main":{"type":"main-product","blocks":{"vendor":{"type":"text","settings":{"text":"","text_style":"uppercase"}},"title":{"type":"title","settings":{}},"price":{"type":"price","settings":{}},"variant_picker":{"type":"variant_picker","settings":{"picker_type":"button","swatch_shape":"circle"}},"custom_liquid_gajkKN":{"type":"custom_liquid","settings":{"custom_liquid":"<style>\n.file-upload-container {\n  display: flex;\n  align-items: center;\n}\n.file-name {\n  margin-left: 10px;\n  font-style: italic;\n}\n<\/style>\n<div class=\"product-form__input\">\n  <label class=\"form__label\"><\/label>\n  <div class=\"file-upload-container\">\n    <input id=\"file-\" form=\"{{ 'product-form-' | append: section.id }}\" \n    name=\"properties[ 1]\" multiple style=\"display: none;\" type=\"file\" required \/>\n    <button id=\"button-\" class=\"button\">Last opp bilde(r)<\/button>\n    <p id=\"fileName-\" class=\"file-name\">Ingen filer valgt<\/p>\n  <\/div>\n  <p id=\"errorMessage\" class=\"error-message\" style=\"display: none;margin-top:0;color:red\">Vennligst last opp bilde(r).<\/p>\n  <p id=\"maxFilesError\" class=\"error-message\" style=\"display: none;margin-top:0;color:red\">For mange bilder valgt. Maks antall er: <span id=\"maxFilesCount\">1<\/span><\/p>\n<\/div>\n\n{% comment %} Legg til initial verdi basert på variantvalg {% endcomment %}\n{%- liquid\n  assign max_allowed_files = 1\n  for option in product.options_with_values\n    if option.name contains 'Antall Bilder' or option.name contains 'Antall'\n      assign selected_value = option.selected_value | default: option.values.first\n      assign number_match = selected_value | split: ' ' | first\n      if number_match contains '1' or number_match contains '5' or number_match contains '10' or number_match contains '20'\n        assign max_allowed_files = number_match | plus: 0\n      endif\n    endif\n  endfor\n-%}\n\n<script>\n  document.addEventListener('DOMContentLoaded', function() {\n    \/\/ Sett initial maks tillatte filer fra Liquid\n    let maxAllowedFiles = {{ max_allowed_files }};\n    document.getElementById('maxFilesCount').textContent = maxAllowedFiles;\n    console.log('Initial maks antall filer fra Liquid:', maxAllowedFiles);\n    \n    \/\/ Finn radioknappene for antall bilder\n    const radioButtons = document.querySelectorAll('input[type=\"radio\"][name*=\"Antall Bilder\"], input[type=\"radio\"][name*=\"Antall-\"], input[type=\"radio\"][name*=\"Antall\"]');\n    \n    if (radioButtons.length > 0) {\n      console.log('Fant radioknapper:', radioButtons.length);\n      \n      \/\/ Legg til eventlistener på hver radioknapp\n      radioButtons.forEach(radio => {\n        radio.addEventListener('change', function() {\n          \/\/ Finn det valgte antallet fra radioknappen\n          const value = this.value;\n          const match = value.match(\/\\d+\/);\n          if (match) {\n            maxAllowedFiles = parseInt(match[0]);\n            document.getElementById('maxFilesCount').textContent = maxAllowedFiles;\n            console.log('Maks antall filer satt til:', maxAllowedFiles);\n          }\n        });\n      });\n      \n      \/\/ Finn den valgte radioknappen og initialiser maxAllowedFiles fra DOM hvis nødvendig\n      const selectedRadio = document.querySelector('input[type=\"radio\"][name*=\"Antall\"]:checked');\n      if (selectedRadio) {\n        const value = selectedRadio.value;\n        const match = value.match(\/\\d+\/);\n        if (match) {\n          maxAllowedFiles = parseInt(match[0]);\n          document.getElementById('maxFilesCount').textContent = maxAllowedFiles;\n          console.log('Initial maks antall filer fra DOM:', maxAllowedFiles);\n        }\n      }\n    } else {\n      console.log('Ingen radioknapper funnet for antall bilder, bruker standardverdi:', maxAllowedFiles);\n    }\n    \n    document.getElementById('file-').addEventListener('change', function(event) {\n      const files = event.target.files;\n      console.log('Antall valgte filer:', files.length, 'Maks tillatt:', maxAllowedFiles);\n      \n      \/\/ Sjekk om antall valgte filer overstiger maksimalt antall\n      if (files.length > maxAllowedFiles) {\n        document.getElementById('maxFilesError').style.display = 'block';\n        \/\/ Reset file input\n        this.value = '';\n        document.getElementById('fileName-').textContent = 'Ingen filer valgt';\n        return;\n      } else {\n        document.getElementById('maxFilesError').style.display = 'none';\n      }\n\n      const fileInput = document.getElementById('file-');\n      const originalForm = fileInput.getAttribute('form');\n      \n      \/\/ Fjern tidligere dynamiske inputs\n      fileInput.parentNode.querySelectorAll('.dynamic-hidden-input-').forEach(input => input.remove());\n      \n      \/\/ Opprett skjulte inputs for hver fil bortsett fra den første\n      for (let i = 0; i < files.length-1; i++) {\n        const file = files[i];\n        const hiddenInput = document.createElement('input');\n        hiddenInput.type = 'file';\n        let myindex = i + 2\n        hiddenInput.name = 'properties[ ' + myindex +']';\n        hiddenInput.classList.add('dynamic-hidden-input-');\n        hiddenInput.classList.add('hidden-input-fileupload');\n        hiddenInput.style.display = 'none';\n        hiddenInput.setAttribute('form', originalForm);\n        const dataTransfer = new DataTransfer();\n        dataTransfer.items.add(file);\n        hiddenInput.files = dataTransfer.files;\n        fileInput.parentNode.appendChild(hiddenInput);\n      }\n      \n      \/\/ Oppdater filnavn-visning\n      let fileName;\n      if (files.length === 0) {\n        fileName = 'Ingen filer valgt';\n      } else if (files.length === 1) {\n        fileName = files[0].name;\n        document.getElementById('errorMessage').style.display = 'none';\n      } else {\n        fileName = files.length + ' filer';\n        document.getElementById('errorMessage').style.display = 'none';\n      }\n      document.getElementById('fileName-').textContent = fileName;\n    });\n    \n    document.getElementById('button-').addEventListener('click', function() {\n      document.getElementById('file-').click();\n    });\n    \n    document.querySelector('.product-form__submit').addEventListener('click', function(event) {\n      const inputFile = document.getElementById('file-');\n      if (!inputFile.files.length && inputFile.required) {\n        document.getElementById('errorMessage').style.display = 'block';\n      }\n    });\n  });\n<\/script>\n\n<script>\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.querySelector(\"form[novalidate]\").removeAttribute(\"novalidate\");\n  });\n<\/script>"}},"buy_buttons":{"type":"buy_buttons","settings":{"show_dynamic_checkout":false,"show_gift_card_recipient":true}},"description":{"type":"description","settings":{}}},"block_order":["vendor","title","price","variant_picker","custom_liquid_gajkKN","buy_buttons","description"],"settings":{"enable_sticky_info":true,"color_scheme":"scheme-724eba02-eeda-4a5e-bca5-b6be88a75d66","media_size":"large","constrain_to_viewport":true,"media_fit":"contain","gallery_layout":"stacked","mobile_thumbnails":"hide","media_position":"left","image_zoom":"lightbox","hide_variants":true,"enable_video_looping":false,"padding_top":0,"padding_bottom":0}},"related-products":{"type":"related-products","disabled":true,"settings":{"heading":"You may also like","heading_size":"h1","products_to_show":4,"columns_desktop":4,"columns_mobile":"2","color_scheme":"scheme-1","image_ratio":"portrait","image_shape":"default","show_secondary_image":true,"show_vendor":false,"show_rating":false,"padding_top":56,"padding_bottom":56}}},"order":["main","related-products"]}